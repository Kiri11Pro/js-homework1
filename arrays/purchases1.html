<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Task 1</title>
    <script>
        const purchase = new Purchase("water", 1, false);
        let purchaseList = [
            purchase,
            new Purchase("apple", 3, true),
            new Purchase("milk", 2, false)
        ];
        // print(sortPurchases(purchaseList));
        // add(new Purchase("milk", 1, false), purchaseList);
        // add(new Purchase("lemon", 1, false), purchaseList);
        buy("milk", purchaseList);
        print(purchaseList);

        function buy(productName, purchaseList) {
            purchaseList
                .filter((element) => element.productName === productName)
                .forEach((element) => element.isBought = true);
        }

        function add(purchase, purchaseList) {
            let foundPurchase = purchaseList.find(
                (element) => {
                    if (element.productName === purchase.productName)
                        return element;
                });
            foundPurchase ? foundPurchase.amount += purchase.amount : purchaseList.push(purchase);
        }

        function print(purchases) {
            document.write("<ul>");
            purchases.forEach((purchase) => document.write(`<li>${purchase}</li>`));
            document.write("</ul>");
        }

        function sortPurchases(purchases) {
            return purchases.sort(function (p1, p2) {
                if (p1.isBought === p2.isBought)
                    return 0;

                if (p1.isBought === false && p2.isBought === true) {
                    return -1;
                }

                return 1;
            });
        }


        function Purchase(productName, amount, isBought) {
            this.productName = productName;
            this.amount = amount;
            this.isBought = isBought;
            this.toString = () => {
                return `Purchase [productName: ${this.productName}, amount: ${this.amount}, isBought: ${this.isBought}]`;
            }
        }
    </script>
</head>
<body>

</body>
</html>